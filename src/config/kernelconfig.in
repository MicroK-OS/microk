# Kernel configuration

comment 'Just accept the defaults unless you know what you are doing'

mainmenu_option next_comment
	comment 'System Architecture'

	choice 'Select system' \
		"x86_64  CONFIG_ARCH_x86_64 \
		AARCH64 CONFIG_ARCH_AARCH64" x86_64

	comment 'Processor'

	if [ "$CONFIG_ARCH_x86_64" = "y" ]; then
		bool 'Enable SSE extensions.'              CONFIG_HW_SSE y
		bool 'Enable compatibility mode support.'  CONFIG_HW_COMP n
	elif [ "$CONFIG_ARCH_AARCH64" = "y" ]; then
		comment 'Not available'
	fi

	comment 'Firmware'

	choice 'Select firmware' \
		"UEFI CONFIG_FM_UEFI \
		BIOS CONFIG_FM_BIOS" UEFI

	mainmenu_option next_comment
		comment 'Bootloader settings'
		if [ "$CONFIG_FM_UEFI" = "y" ]; then
			comment 'Bootloader for UEFI'
		elif [ "$CONFIG_FM_BIOS" = "y" ]; then
			comment 'Bootloader for BIOS'
		fi
	endmenu

	bool 'Enable support for ACPI.'                    CONFIG_FM_ACPI y
	bool 'Enable support for SMBIOS.'                  CONFIG_FM_SMBIOS n

endmenu

mainmenu_option next_comment
	comment 'Kernel settings'
	string 'Custom kernel name.'                       CONFIG_KERNEL_CNAME 'MicroK'
	string 'Curstom kernel version.'                   CONFIG_KERNEL_CVER '0.0.0'
endmenu

# Drivers configuration

mainmenu_option next_comment
	comment 'Drivers'

	bool 'Enable UDI'                                  CONFIG_UDI y

	if [ "$CONFIG_UDI" = "y" ]; then
		source src/config/kernelconfig/udiconfig.in
	fi

	source src/config/kernelconfig/internaldriverconfig.in
endmenu

# Filesystem support
mainmenu_option next_comment
	comment 'VFS'

	bool 'Enable virtual file systems.'                CONFIG_VFS y
	if [ "$CONFIG_VFS" = "y" ]; then
		int 'Maximum number of drives.'            CONFIG_VFS_MAX_DRIVES 128
		int 'Maximum file name length.'            CONFIG_VFS_FILE_MAX_NAME_LENGTH 128
	fi
endmenu
