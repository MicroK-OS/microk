# Kernel configuration

comment 'Just accept the defaults unless you know what you are doing'

mainmenu_option next_comment
	comment 'System Architecture'

	choice 'Select system' \
		"x86_64  CONFIG_ARCH_x86_64 \
		AARCH64 CONFIG_ARCH_AARCH64" x86_64

	comment 'Processor'

	if [ "$CONFIG_ARCH_x86_64" = "y" ]; then
		bool 'Enable SSE extensions? '             CONFIG_HW_SSE y
		bool 'Enable compatibility mode support? ' CONFIG_HW_COMP n
	elif [ "$CONFIG_ARCH_AARCH64" = "y" ]; then
		comment 'Not available'
	fi

	comment 'Firmware'

	choice 'Select firmware' \
		"UEFI CONFIG_FM_UEFI \
		BIOS CONFIG_FM_BIOS" UEFI

	if [ "$CONFIG_FM_UEFI" = "y" ]; then
		bool 'Enable the UEFI GOP?'                CONFIG_HW_GOP y
	elif [ "$CONFIG_FM_BIOS" = "y" ]; then
		comment 'Not available'
	fi

	bool 'Enable support for ACPI?'            CONFIG_ACPI y
	bool 'Enable support for SMBIOS?'          CONFIG_FM_SMBIOS n

endmenu

mainmenu_option next_comment
	comment 'Kernel settings'
	string 'Custom kernel name: '   CONFIG_KERNEL_CNAME 'MicroK'
endmenu

# Networking support
mainmenu_option next_comment
	comment 'Networking'

	bool 'Enable networking?'             CONFIG_NET y
endmenu

# Filesystem support
mainmenu_option next_comment
	comment 'Drivers'

	bool 'Enable UDI?' CONFIG_UDI y
	if [ "$CONFIG_UDI" = "y" ]; then
		hex 'Insert UDI version: ' CONFIG_UDI_VERSION 0x101
	fi

	bool 'Enable virtual file systems?'             CONFIG_VFS y
	if [ "$CONFIG_VFS" = "y" ]; then
		int 'Insert maximum number of drives: ' CONFIG_VFS_MAX_DRIVES 128
		int 'Insert maximum file name length: ' CONFIG_VFS_FILE_MAX_NAME_LENGTH 128
	fi

	bool 'Enable AHCI?'             CONFIG_AHCI y
	if [ "$CONFIG_AHCI" = "y" ]; then
		int 'Insert AHCI DMA buffer size: ' CONFIG_AHCI_DMA_SIZE  4194304
	fi

endmenu

# Drivers configuration

mainmenu_option next_comment
	comment 'Drivers'

	bool 'Enable the serial port?'             CONFIG_HW_SERIAL y
endmenu
